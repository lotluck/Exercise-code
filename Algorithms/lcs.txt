#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define MAXLEN 100 


int b[MAXLEN][MAXLEN] = {0};
int c[MAXLEN][MAXLEN] = {0};


void lcs_length(char *sa,char *sb,int m,int n)
{
    int i = 0;
    int j = 0;

    for(i = 0; i <= m; i++){
        c[i][0] = 0;
    }//end for
    for(j = 0; j <= n; j++){
        c[0][j] = 0;
    }//end for

    for(i = 1; i <= m; i++){
        for(j = 1; j <= n; j++){
            if(sa[i-1] == sb[j-1]){
                c[i][j] = c[i-1][j-1] + 1; 
                b[i][j] = 0;
            }else if(c[i-1][j] >= c[i][j-1]){
                c[i][j] = c[i-1][j];
                b[i][j] = 1;
            }else{
                c[i][j] = c[i][j-1];
                b[i][j] = -1;
            }
        }//end for 2
    }//end for 1
}

void print_lcs(char *sa,int i,int j)
{
    if(i == 0 || j == 0){
        return;
    }
    if(b[i][j] == 0){
        print_lcs(sa,i-1,j-1);
        printf("%c ",sa[i-1]);
    }else if(b[i][j] == 1){
        print_lcs(sa,i-1,j);
    }else{
        print_lcs(sa,i,j-1);
    }


}


void print_matrix(int (*matrix)[MAXLEN],int m,int n)
{
    int i = 0;
    int j = 0;

    for(i = 0; i <= m; i++){
        for(j = 0; j <= n; j++){
            printf("%5d ",matrix[i][j]);
        }
        printf("\n");
    }

    printf("\n");
}

int main(int argc,char *argv[])
{
    char sa[MAXLEN] = "ABCBDAB";
    char sb[MAXLEN] = "BDCABA";
    int m = 0;
    int n = 0;

    m = strlen(sa);
    n = strlen(sb);


    // exec function
    lcs_length(sa,sb,m,n);

    print_matrix(b,m,n);

    print_matrix(c,m,n);

    print_lcs(sa,m,n);

    return 0;
}