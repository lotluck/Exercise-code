#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define  MAXN  11
#define  MAXK  9


static int m[MAXN][MAXN];
static int w[MAXN][MAXN];


void MaxDp(int *a,int n,int k)
{
    int i = 0;
    int j = 0;
    int d = 0;
    int max = 0;
    int temp = 0;

		printf("\n\n\n\n");


    for(i = 1; i <= n; i++){
        m[i][1] = w[1][i];
    }//end for
		for(i = 0; i <= n; i++){
		for(j =0;j<=n;j++){
		   printf("%7d ",m[i][j]);
		}
		printf("\n");
	}

		printf("\n\n\n\n");

    for(i = 1; i <= n; i++){
        for(j = 2; j <= k; j++){
            max = 0;
            for(d = 1; d < i; d++){
                temp = m[d][j-1]*w[d+1][i];
                if(temp > max){
                    max = temp;
                }//end if
                m[i][j] = max;
            }//end for 3
        }//end for 2
    }//end for 1

		printf("\n\n\n\n");	
		for(i = 0; i <= n; i++){
		for(j =0;j<=n;j++){
		   printf("%7d ",m[i][j]);
		}
		printf("\n");
	}
}

void init_matrix(int *a,int n)
{
    int i = 0;
    int j = 0;

    for(i = 1; i <= n; i++){
        w[i][i] = a[i];
        for(j = i+1; j <= n; j++){
            w[i][j] = w[i][j - 1]*10 + a[j];
            printf("%7d ",w[i][j]);
        }//end for 2
		printf("\n");
    }//end for 1

	for(i = 0; i <= n; i++){
		for(j =0;j<=n;j++){
		   printf("%7d ",w[i][j]);
		}
		printf("\n");
	}

}

int main(int argc,char *argv[])
{
    char c = '\0';
    int  i = 0;
    int  n = 0;
    int  k = 0;
    int  a[MAXN] = {0};

    scanf("%d%d",&n,&k);
    fflush(stdin);

    while((c=getchar())!= '\n'){
        a[++i] = c - '0';
    }//end while

    
    
    init_matrix(a,n);

    MaxDp(a,n,k);

    printf("max %d is %d\n",k,m[n][k]);

    return 0;
}